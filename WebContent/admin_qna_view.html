<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>Pet Studio 관리자</title>

    <!-- 모바일 웹 페이지 설정 (icon css 파일이 없음) -->

    <!-- Bootstrap -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">

    <!-- 나눔고딕 웹 폰트 적용 -->
    <link href="assets/css/nanumfont.css" rel="stylesheet"> 

    <!-- 반응형 웹을 지원하지 않을 경우 -->
    <!--<link href="assets/css/non-responsive.css" rel="stylesheet">-->

    <link href="assets/css/inside.css" rel="stylesheet">
    <link href="assets/css/user_sub.css" rel="stylesheet">

    <!-- IE8 이하 버전 지원 -->
    <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
      <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    
    <!-- IE10 반응형 웹 버그 보완 -->
    <!--[if lt IE 9]>
      <link href="assets/css/ie10.css" rel="stylesheet">
      <script src="assets/js/ie10.js"></script>
    <![endif]-->

    <!-- Javascript -->
    <script src="assets/js/jquery-1.11.0.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- sweetalert plugin (alert) -->
    <link rel="stylesheet" href="assets/plugins/sweetalert/sweetalert.css" />
    <script src="assets/plugins/sweetalert/sweetalert.min.js"></script>
        
    <script type="text/javascript">
      $(function() {
        $("#editBtn").click(function() {
          location.href = "admin_qna_edit.html";
        });

        $("#delBtn").click(function() {
          swal({
            title:"삭제확인",
            text:"정말 삭제하시겠습니까?",
            type:"warning",
            closeOnConfirm:false,
            showCancelButton:true,
            showLoaderOnConfirm:true
          }, function (isConfirm) {
            if(isConfirm) {
              setTimeout(function(){
                swal("삭제되었습니다.");
                setTimeout(function(){location.href = "admin_qna_list.html";},1000);
              },2000);
            }
          });
        });

        $("#listBtn").click(function() {
          location.href = "admin_qna_list.html";
        });

        $("#commentWriteBtn").click(function() {
          if($.trim($("#comment").val()) == "") {
            swal({
              title: "에러",
              text: "댓글을 입력하세요.",
              type: "error"
            }, function() {
              setTimeout(function() {
                $("#comment").val('');
                $("#comment").focus();
              }, 100);
            });
          } else {
            $("#viewFrm").attr("action", "admin_qna_view.html")
            $("#viewFrm").submit();
          }
        });

				//댓글 수정을 누르기 전으로 되돌리기 (모든 댓글 수정 박스의 내용을 지우고 모든 댓글 수정 버튼을 보이게 한다.)
				function commentEditBefore(){
					//모든 댓글 수정 박스의 내용을 지운다.
					$(".media-list>li #commentEditBox").remove();

					//모든 댓글 수정 버튼을 보이게 한다.
					$(".media-list>li a").show();
				};

				// 댓글 수정 및 삭제
				$(".media a").click(function() {
					var index = $(this).parent().parent().parent().parent().index();

					//댓글 수정
					if($(this).attr("title") == "댓글수정") {							
						// 댓글 수정을 누르기 전으로 되돌리기
						commentEditBefore();

						//해당 댓글 수정버튼을 사라지게 한다.
						$(".media-list>li:eq(" + index + ") a").eq(0).hide();

						//댓글 수정 입력 생성
						var commentEditInput = "<div id='commentEditBox'>";
						commentEditInput += "<textarea rows='3' name='commentEdit' id='commentEdit' class='form-control' placeholder='댓글을 입력하세요.'>";
						commentEditInput += $(".media-list>li:eq(" + index + ") p").html().replace(/<br>/gi, "\r\n");
						commentEditInput += "</textarea>";
						commentEditInput += "<div class='pull-right'>";
						commentEditInput += "<a href='#' title='저장' class='btn btn-default btn-xs'>저장</a>";
						commentEditInput += "<a href='#' title='취소' class='btn btn-default btn-xs'>취소</a>"
						commentEditInput += "</div>";
						commentEditInput += "</div>";
						$(".media-list>li:eq(" + index + ")>.media-body").append(commentEditInput);
					}
					//댓글 삭제	
					else if($(this).attr("title") == "댓글삭제") {
            swal({
              title:"댓글삭제확인",
              text:"정말 댓글을 삭제하시겠습니까?",
              type:"warning",
              closeOnConfirm:false,
              showCancelButton:true,
              showLoaderOnConfirm:true
            }, function (isConfirm) {
              if(isConfirm) {
                setTimeout(function(){
                  swal("댓글이 삭제되었습니다.");
                  setTimeout(function(){location.href = "admin_qna_view.html";},1000);
                },2000);
              }
            });
					}
				});

				// 댓글 저장 및 취소
				$(document).on("click", "#commentEditBox a", function() {
						//댓글 저장
            if($(this).attr("title") == "저장") {
							console.log("'" + $.trim($("#commentEdit").val()) + "'");
							if($.trim($("#commentEdit").val()) == "") {
								swal({
									title: "에러",
									text: "수정할 댓글을 입력하세요.",
									type: "error"
								}, function() {
									setTimeout(function() {
										$("#commentEdit").val('');
										$("#commentEdit").focus();
									}, 100);
								});
							} else {
								$("#viewFrm").attr("action", "admin_qna_view.html")
								$("#viewFrm").submit();
							}
					}
					// 댓글 취소
					else {
						commentEditBefore();
					}

        });
      });
    </script>
  </head>

	<body>
    <!-- 내용영역 시작 -->
		<div class="container">

      <!-- 메뉴바 시작 -->
      <div class="navbar navbar-inverse" role="navigation">

        <!-- 로고 영역 시작 -->
        <div class="navbar-header">
          <!-- 반응형 메뉴 버튼 시작 -->
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">메뉴열기</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <!-- 반응형 메뉴 버튼 끝 -->
        </div>
        <!-- 로고 영역 끝 -->


        <!-- 메뉴 영역 시작 -->
        <div class="navbar-collapse collapse">

          <!-- 메뉴 항목 시작 -->
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="admin_member_list.html" class="dropdown-toggle" data-toggle="dropdown">회원관리 <b class="caret"></b></a>
              <ul class="dropdown-menu nav-dropdown">
                <li><a href="admin_member_list.html">회원정보</a></li>
                <li><a href="admin_member_out.html">회원탈퇴</a></li>
              </ul>
            </li>
            <li><a href="admin_gallery_god.html">갤러리</a></li>
            <li><a href="admin_booking_calendar.html">예약관리</a></li>
            <li><a href="admin_notice_list.html">공지사항</a></li>
            <li><a href="admin_qna_list.html">질의응답</a></li>
            <li><a href="admin_login.html">로그아웃</a></li>
            
          </ul>
          <!-- 메뉴 항목 끝 -->

        </div>
        <!-- 메뉴 영역 끝 -->
      </div>
      <!-- 메뉴바 끝 -->

      <!-- 경로 및 해당 페이지 타이틀 시작 -->
      <div class="location">
        <ol class="breadcrumb pull-right">
          <li><a href="#">Home</a></li>
          <li class="active">질의응답</li>
        </ol>
      </div>

      <hr />

      <h3 class="title">질의응답</h3>
      <!-- 경로 및 해당 페이지 타이틀 끝 -->

      <!-- 내용 시작 -->
      <div class="content">
        <form name="viewFrm" id="viewFrm" method="post" class="form-horizontal" role="form">
          <fieldset>
            <legend class="sr-only">질의응답</legend>

            <table class="view">
              <colgroup>
                <col width="15%">
                <col width="85%">
              </colgroup>
              <tbody>
                <tr>
                  <th>제목</th>
                  <td>예약 질문 입니다.</td>
                </tr>
                <tr>
                  <th>내용</th>
                  <td>
                    5월 30일 오후 2시에 강아지 한마리 사진 촬영 예약합니다.<br />
                    예약 가능 여부와 예약금, 총금액, 촬영시간 문의 드립니다.
                  </td>
                </tr>
              </tbody>
            </table>

            <div class="form-group">
              <div class="col-md-12 text-right">
                <button type="button" id="editBtn" class="btn btn-primary">수정</button>
                <button type="button" id="delBtn" class="btn btn-danger">삭제</button>
                <button type="button" id="listBtn" class="btn btn-default">목록</button>
              </div>
            </div>

						<div class="commentWrite">
							<div class="form-group">
								<div class="col-md-12 text-right">
									<label class="sr-only" for="comment">댓글 등록</label>
									<textarea rows="3" name="comment" id="comment" class="form-control" placeholder="댓글을 입력하세요."></textarea>
									<button id="commentWriteBtn" class="btn btn-info btn-sm" type="button">댓글 등록</button>
								</div>
							</div>
						</div>

            <ul class="media-list">
              <li class="media">
                <div class="media-body">
									<div class="clearfix">
										<h4 class="media-heading pull-left">관리자 <small>2017-05-08 13:12:32</small></h4>
										<div class="pull-right">
											<a href="#" title="댓글수정" class="btn btn-default btn-xs">댓글 수정</a>
											<a href="#" title="댓글삭제" class="btn btn-default btn-xs">댓글 삭제</a>
										</div>
									</div>
                  <p>안녕하세요. 홍길동님~<br />5월 30일 오후 2시는 이미 예약이 완료 되었습니다.<br />괜찮으시다면 오후 4시는 가능하시다면 예약 도와 드리겠습니다.</p>
                </div>
              </li>
              <li class="media">
                <div class="media-body">
									<div class="clearfix">
										<h4 class="media-heading pull-left">홍길동 <small>2017-05-09 11:10:02</small></h4>
										<div class="pull-right">
											<a href="#" title="댓글수정" class="btn btn-default btn-xs">댓글 수정</a>
											<a href="#" title="댓글삭제" class="btn btn-default btn-xs">댓글 삭제</a>
										</div>
									</div>
                  <p>안녕하세요. 관리자님!<br />5월 30일 오후 4시로 예약 부탁드립니다.</p>
                </div>
              </li>
            </ul>

        </form>
      </div>
      <!-- 내용 끝 -->
		</div>
    <!-- 내용영역 끝 -->
	</body>
</html>